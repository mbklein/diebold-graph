<script type="text/javascript">
  var chart;
  $(document).ready(function() {
    var seriesData = <%= raw(@presentations.collect { |p| p.series }.to_json) %>;
    $.map(seriesData, function(item) { item.pointStart = Date.parse(item.pointStart) });
    chart = new Highcharts.Chart({
      chart: {
         renderTo: 'container',
         defaultSeriesType: 'spline',
         zoomType: 'x',
         spacingRight: 20
      },
      title: {
         text: 'code4lib 2012 Presentation Voting'
      },
      xAxis: {
         type: 'datetime',
         maxZoom: 14 * 24 * 3600000, // fourteen days
         title: {
            text: null
         }
      },
      yAxis: {
         title: {
            text: 'Votes'
         },
         min: 0,
         startOnTick: false,
         showFirstLabel: false
      },
      plotOptions: {
         spline: {
            lineWidth: 4,
            states: {
               hover: {
                  lineWidth: 5
               }
            },
            marker: {
               enabled: false,
               states: {
                  hover: {
                     enabled: true,
                     symbol: 'circle',
                     radius: 5,
                     lineWidth: 1
                  }
               }   
            }
         }
      },
      legend: { enabled: false },
      series: seriesData
    });
  });
</script>

<div id="container" class="highcharts-container" style="height:768px; margin: 0 2em; clear:both; min-width: 600px">
</div>
